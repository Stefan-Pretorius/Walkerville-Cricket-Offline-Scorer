<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Walkerville Pumas Scorer | U14 Edition</title>
    <link rel="stylesheet" href="style.css?v=1.5">
</head>
<body>
    <div id="app" class="main-container">
        
        <div id="setup-screen" class="card">
            <h2>Pumas Match Setup</h2>
            <div class="input-group">
                <label>Opening Batters</label>
                <input type="text" id="p1-name" placeholder="Striker" value="Batter 1">
                <input type="text" id="p2-name" placeholder="Non-Striker" value="Batter 2">
                <label>Bowling</label>
                <input type="text" id="bowler-name" placeholder="Opening Bowler" value="Bowler 1">
                <label>Retirement Rules (Current Team)</label>
                <select id="player-count">
                    <option value="8">8 Players (21 balls)</option>
                    <option value="9">9 Players (18 balls)</option>
                    <option value="10">10 Players (16 balls)</option>
                    <option value="11">11 Players (15 balls)</option>
                    <option value="12">12 Players (14 balls)</option>
                    <option value="13" selected>13 Players (13 balls)</option>
                </select>
                <input type="number" id="match-overs" placeholder="Match Overs" value="20">
            </div>
            <button class="btn-primary" onclick="startGame()">Start Match</button>
        </div>

        <div id="scoring-screen" class="scoring-grid" style="display:none;">
            <div class="left-col">
                <header class="scorecard-header card">
                    <h1 id="total-display">0 / 0</h1>
                    <div class="header-details">
                        <p>Overs: <span id="overs-display">0.0</span></p>
                        <p>Ball Limit: <strong id="retire-limit-display">--</strong></p>
                        <p>Bowler: <strong id="cur-bowler-display">--</strong></p>
                    </div>
                </header>

                <div class="batter-stats">
                    <div id="striker-box" class="player-card active">
                        <div class="player-info">
                            <span class="name" id="striker-name">--</span><span class="striker-marker">*</span>
                            <div class="balls-left-badge" id="striker-left">--</div>
                        </div>
                        <div class="score"><span id="striker-runs">0</span>(<span id="striker-balls">0</span>)</div>
                    </div>
                    <div id="non-striker-box" class="player-card">
                        <div class="player-info">
                            <span class="name" id="non-striker-name">--</span>
                            <div class="balls-left-badge" id="ns-left">--</div>
                        </div>
                        <div class="score"><span id="non-striker-runs">0</span>(<span id="non-striker-balls">0</span>)</div>
                    </div>
                </div>

                <div class="action-row">
                    <button class="btn-swap" onclick="manualSwapStrike()">‚áÑ Swap Strike (S)</button>
                    <button class="btn-retire" onclick="retireBatter()">üèÉ Retire Striker</button>
                </div>

                <div class="controls">
                    <div class="grid-row">
                        <button onclick="addBall(0, 'normal')">0</button>
                        <button onclick="addBall(1, 'normal')">1</button>
                        <button onclick="addBall(2, 'normal')">2</button>
                        <button onclick="addBall(3, 'normal')">3</button>
                    </div>
                    <div class="grid-row">
                        <button onclick="addBall(4, 'normal')" class="boundary">4</button>
                        <button onclick="addBall(6, 'normal')" class="boundary">6</button>
                        <button onclick="addWicket()" class="wicket">WKT</button>
                        <button onclick="undo()" class="undo">Undo (U)</button>
                    </div>
                    <div class="grid-row extras">
                        <button onclick="addExtra('wide')">WD</button>
                        <button onclick="addExtra('noball')">NB</button>
                        <button onclick="addExtra('byes')">BYE</button>
                        <button onclick="openFieldModal()" class="btn-field">Field</button>
                    </div>
                </div>

                <div class="stats-summary card">
                    <h3>Scorecard</h3>
                    <table id="batter-table">
                        <thead><tr><th>Batter</th><th>R</th><th>B</th><th>Status</th></tr></thead>
                        <tbody></tbody>
                    </table>
                    <table id="bowler-table">
                        <thead><tr><th>Bowler</th><th>O</th><th>R</th><th>W</th></tr></thead>
                        <tbody></tbody>
                    </table>
                </div>

                <div class="footer-actions">
                    <button onclick="changeTeamRules()" class="btn-secondary">Change Team Size/Rules</button>
                    <button onclick="exportToCSV()" class="btn-export">Export CSV</button>
                    <button onclick="resetMatch()" class="btn-danger">New Game</button>
                </div>
            </div>

            <div class="history-sidebar card">
                <h3>Ball History</h3>
                <div id="ball-thread-list" class="scroll-thread"></div>
            </div>
        </div>

        <div id="rules-modal" class="modal">
            <div class="modal-content">
                <h3>Update Innings Rules</h3>
                <label>Players in this Team:</label>
                <select id="update-player-count">
                    <option value="8">8 Players (21 balls)</option>
                    <option value="9">9 Players (18 balls)</option>
                    <option value="10">10 Players (16 balls)</option>
                    <option value="11">11 Players (15 balls)</option>
                    <option value="12">12 Players (14 balls)</option>
                    <option value="13">13 Players (13 balls)</option>
                </select>
                <button class="btn-primary" onclick="applyRuleChange()">Apply Changes</button>
            </div>
        </div>

        </div>
    <script src="app.js"></script>
</body>
</html>